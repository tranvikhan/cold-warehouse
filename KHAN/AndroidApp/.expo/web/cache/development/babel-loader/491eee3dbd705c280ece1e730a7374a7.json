{"ast":null,"code":"import { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\nvar isEnabled = false;\n\nif (canUseDOM) {\n  var HOVER_THRESHOLD_MS = 1000;\n  var lastTouchTimestamp = 0;\n\n  function enableHover() {\n    if (isEnabled || Date.now() - lastTouchTimestamp < HOVER_THRESHOLD_MS) {\n      return;\n    }\n\n    isEnabled = true;\n  }\n\n  function disableHover() {\n    lastTouchTimestamp = Date.now();\n\n    if (isEnabled) {\n      isEnabled = false;\n    }\n  }\n\n  document.addEventListener('touchstart', disableHover, true);\n  document.addEventListener('touchmove', disableHover, true);\n  document.addEventListener('mousemove', enableHover, true);\n}\n\nexport default (function () {\n  return isEnabled;\n});","map":{"version":3,"sources":["../src/isHoverEnabled.ts"],"names":[],"mappings":"AAGA,SAAS,SAAT,QAA0B,+BAA1B;AAEA,IAAI,SAAS,GAAG,KAAhB;;AAEA,IAAI,SAAJ,EAAe;AASb,MAAM,kBAAkB,GAAG,IAA3B;AACA,MAAI,kBAAkB,GAAG,CAAzB;;AAEA,WAAS,WAAT,GAAoB;AAClB,QAAI,SAAS,IAAI,IAAI,CAAC,GAAL,KAAa,kBAAb,GAAkC,kBAAnD,EAAuE;AACrE;AACD;;AACD,IAAA,SAAS,GAAG,IAAZ;AACD;;AAED,WAAS,YAAT,GAAqB;AACnB,IAAA,kBAAkB,GAAG,IAAI,CAAC,GAAL,EAArB;;AACA,QAAI,SAAJ,EAAe;AACb,MAAA,SAAS,GAAG,KAAZ;AACD;AACF;;AAED,EAAA,QAAQ,CAAC,gBAAT,CAA0B,YAA1B,EAAwC,YAAxC,EAAsD,IAAtD;AACA,EAAA,QAAQ,CAAC,gBAAT,CAA0B,WAA1B,EAAuC,YAAvC,EAAqD,IAArD;AACA,EAAA,QAAQ,CAAC,gBAAT,CAA0B,WAA1B,EAAuC,WAAvC,EAAoD,IAApD;AACD;;AAED,gBAAe;AAAA,SAAM,SAAN;AAAA,CAAf","sourcesContent":["// By @necolas:\n// https://github.com/necolas/react-native-web/blob/master/docs/guides/web-recipes.md\n\nimport { canUseDOM } from 'fbjs/lib/ExecutionEnvironment';\n\nlet isEnabled = false;\n\nif (canUseDOM) {\n  /**\n   * Web browsers emulate mouse events (and hover states) after touch events.\n   * This code infers when the currently-in-use modality supports hover\n   * (including for multi-modality devices) and considers \"hover\" to be enabled\n   * if a mouse movement occurs more than 1 second after the last touch event.\n   * This threshold is long enough to account for longer delays between the\n   * browser firing touch and mouse events on low-powered devices.\n   */\n  const HOVER_THRESHOLD_MS = 1000;\n  let lastTouchTimestamp = 0;\n\n  function enableHover() {\n    if (isEnabled || Date.now() - lastTouchTimestamp < HOVER_THRESHOLD_MS) {\n      return;\n    }\n    isEnabled = true;\n  }\n\n  function disableHover() {\n    lastTouchTimestamp = Date.now();\n    if (isEnabled) {\n      isEnabled = false;\n    }\n  }\n\n  document.addEventListener('touchstart', disableHover, true);\n  document.addEventListener('touchmove', disableHover, true);\n  document.addEventListener('mousemove', enableHover, true);\n}\n\nexport default () => isEnabled;\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}