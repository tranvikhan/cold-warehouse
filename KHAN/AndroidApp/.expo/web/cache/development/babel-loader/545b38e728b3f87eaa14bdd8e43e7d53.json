{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar _marked = _regeneratorRuntime.mark(getRoomList),\n    _marked2 = _regeneratorRuntime.mark(getRoomInfo),\n    _marked3 = _regeneratorRuntime.mark(newRoom),\n    _marked4 = _regeneratorRuntime.mark(updateRoom),\n    _marked5 = _regeneratorRuntime.mark(deleteRoom),\n    _marked6 = _regeneratorRuntime.mark(watchGetRoomList),\n    _marked7 = _regeneratorRuntime.mark(watchGetCurrentRoomInfo),\n    _marked8 = _regeneratorRuntime.mark(watchCreateRoom),\n    _marked9 = _regeneratorRuntime.mark(watchUpdateRoom),\n    _marked10 = _regeneratorRuntime.mark(watchDeleteRooms),\n    _marked11 = _regeneratorRuntime.mark(RoomListSaga);\n\nimport { all, call, fork, takeEvery, put } from 'redux-saga/effects';\nimport { requestApi } from 'helpers/api';\nimport { CREATE_ROOM, CREATE_ROOM_SUCCESS, DELETE_ROOM, GET_CURR_ROOM_INFO, GET_ROOM_LIST, SET_CURR_ROOM, UPDATE_ROOM } from \"./constants\";\nimport { getRoomListSuccess, getRoomListFailed, createRoomSuccess, createRoomFailed, updateRoomFailed, updateRoomSuccess, deleteRoomSuccess, deleteRoomFailed, getCurrentRoomInfoSuccess, getCurrentRoomInfoFailed } from \"./actions\";\n\nfunction getRoomList(_ref) {\n  var user, response;\n  return _regeneratorRuntime.wrap(function getRoomList$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          user = _ref.payload.user;\n          _context.prev = 1;\n          _context.next = 4;\n          return call(requestApi, {\n            method: 'get',\n            headers: {\n              'x-access-token': user.accessToken\n            },\n            url: 'api/room/access/all'\n          });\n\n        case 4:\n          response = _context.sent;\n\n          if (!(response.status == \"success\")) {\n            _context.next = 10;\n            break;\n          }\n\n          _context.next = 8;\n          return put(getRoomListSuccess(response.result.accesses));\n\n        case 8:\n          _context.next = 12;\n          break;\n\n        case 10:\n          _context.next = 12;\n          return put(getRoomListFailed(response.result));\n\n        case 12:\n          _context.next = 18;\n          break;\n\n        case 14:\n          _context.prev = 14;\n          _context.t0 = _context[\"catch\"](1);\n          _context.next = 18;\n          return put(getRoomListFailed(_context.t0));\n\n        case 18:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, null, [[1, 14]]);\n}\n\nfunction getRoomInfo(_ref2) {\n  var _ref2$payload, user, room_id, response;\n\n  return _regeneratorRuntime.wrap(function getRoomInfo$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _ref2$payload = _ref2.payload, user = _ref2$payload.user, room_id = _ref2$payload.room_id;\n          _context2.prev = 1;\n          _context2.next = 4;\n          return call(requestApi, {\n            method: 'get',\n            headers: {\n              'x-access-token': user.accessToken\n            },\n            url: 'api/room/',\n            params: {\n              room_id: room_id\n            }\n          });\n\n        case 4:\n          response = _context2.sent;\n\n          if (!(response.status == \"success\")) {\n            _context2.next = 10;\n            break;\n          }\n\n          _context2.next = 8;\n          return put(getCurrentRoomInfoSuccess(response.result.room));\n\n        case 8:\n          _context2.next = 12;\n          break;\n\n        case 10:\n          _context2.next = 12;\n          return put(getCurrentRoomInfoFailed(response.result));\n\n        case 12:\n          _context2.next = 18;\n          break;\n\n        case 14:\n          _context2.prev = 14;\n          _context2.t0 = _context2[\"catch\"](1);\n          _context2.next = 18;\n          return put(getCurrentRoomInfoFailed(_context2.t0));\n\n        case 18:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, null, [[1, 14]]);\n}\n\nfunction newRoom(_ref3) {\n  var _ref3$payload, user, room, options, response;\n\n  return _regeneratorRuntime.wrap(function newRoom$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          _ref3$payload = _ref3.payload, user = _ref3$payload.user, room = _ref3$payload.room;\n          options = {\n            method: 'post',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-access-token': user.accessToken\n            },\n            data: room,\n            url: 'api/room/create'\n          };\n          _context3.prev = 2;\n          _context3.next = 5;\n          return call(requestApi, options);\n\n        case 5:\n          response = _context3.sent;\n\n          if (!(response.status === 'success')) {\n            _context3.next = 11;\n            break;\n          }\n\n          _context3.next = 9;\n          return put(createRoomSuccess(response.result.room));\n\n        case 9:\n          _context3.next = 13;\n          break;\n\n        case 11:\n          _context3.next = 13;\n          return put(createRoomFailed(response.result));\n\n        case 13:\n          _context3.next = 19;\n          break;\n\n        case 15:\n          _context3.prev = 15;\n          _context3.t0 = _context3[\"catch\"](2);\n          _context3.next = 19;\n          return put(createRoomFailed(_context3.t0));\n\n        case 19:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, null, [[2, 15]]);\n}\n\nfunction updateRoom(_ref4) {\n  var _ref4$payload, user, room_id, room_info, options, response;\n\n  return _regeneratorRuntime.wrap(function updateRoom$(_context4) {\n    while (1) {\n      switch (_context4.prev = _context4.next) {\n        case 0:\n          _ref4$payload = _ref4.payload, user = _ref4$payload.user, room_id = _ref4$payload.room_id, room_info = _ref4$payload.room_info;\n          options = {\n            method: 'post',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-access-token': user.accessToken\n            },\n            data: _objectSpread({\n              room_id: room_id\n            }, room_info),\n            url: 'api/room/edit'\n          };\n          _context4.prev = 2;\n          _context4.next = 5;\n          return call(requestApi, options);\n\n        case 5:\n          response = _context4.sent;\n\n          if (!(response.status === 'success')) {\n            _context4.next = 11;\n            break;\n          }\n\n          _context4.next = 9;\n          return put(updateRoomSuccess(response.result.room));\n\n        case 9:\n          _context4.next = 13;\n          break;\n\n        case 11:\n          _context4.next = 13;\n          return put(updateRoomFailed(response.result));\n\n        case 13:\n          _context4.next = 19;\n          break;\n\n        case 15:\n          _context4.prev = 15;\n          _context4.t0 = _context4[\"catch\"](2);\n          _context4.next = 19;\n          return put(updateRoomFailed(_context4.t0));\n\n        case 19:\n        case \"end\":\n          return _context4.stop();\n      }\n    }\n  }, _marked4, null, [[2, 15]]);\n}\n\nfunction deleteRoom(_ref5) {\n  var _ref5$payload, user, room_id, options, response;\n\n  return _regeneratorRuntime.wrap(function deleteRoom$(_context5) {\n    while (1) {\n      switch (_context5.prev = _context5.next) {\n        case 0:\n          _ref5$payload = _ref5.payload, user = _ref5$payload.user, room_id = _ref5$payload.room_id;\n          options = {\n            method: 'delete',\n            headers: {\n              'Content-Type': 'application/json',\n              'x-access-token': user.accessToken\n            },\n            data: {\n              room_id: room_id\n            },\n            url: 'api/room/'\n          };\n          _context5.prev = 2;\n          _context5.next = 5;\n          return call(requestApi, options);\n\n        case 5:\n          response = _context5.sent;\n\n          if (!(response.status === 'success')) {\n            _context5.next = 11;\n            break;\n          }\n\n          _context5.next = 9;\n          return put(deleteRoomSuccess(room_id));\n\n        case 9:\n          _context5.next = 13;\n          break;\n\n        case 11:\n          _context5.next = 13;\n          return put(deleteRoomFailed(response.result));\n\n        case 13:\n          _context5.next = 19;\n          break;\n\n        case 15:\n          _context5.prev = 15;\n          _context5.t0 = _context5[\"catch\"](2);\n          _context5.next = 19;\n          return put(deleteRoomFailed(_context5.t0));\n\n        case 19:\n        case \"end\":\n          return _context5.stop();\n      }\n    }\n  }, _marked5, null, [[2, 15]]);\n}\n\nfunction watchGetRoomList() {\n  return _regeneratorRuntime.wrap(function watchGetRoomList$(_context6) {\n    while (1) {\n      switch (_context6.prev = _context6.next) {\n        case 0:\n          _context6.next = 2;\n          return takeEvery(GET_ROOM_LIST, getRoomList);\n\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }\n  }, _marked6);\n}\n\nfunction watchGetCurrentRoomInfo() {\n  return _regeneratorRuntime.wrap(function watchGetCurrentRoomInfo$(_context7) {\n    while (1) {\n      switch (_context7.prev = _context7.next) {\n        case 0:\n          _context7.next = 2;\n          return takeEvery(GET_CURR_ROOM_INFO, getRoomInfo);\n\n        case 2:\n        case \"end\":\n          return _context7.stop();\n      }\n    }\n  }, _marked7);\n}\n\nfunction watchCreateRoom() {\n  return _regeneratorRuntime.wrap(function watchCreateRoom$(_context8) {\n    while (1) {\n      switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.next = 2;\n          return takeEvery(CREATE_ROOM, newRoom);\n\n        case 2:\n        case \"end\":\n          return _context8.stop();\n      }\n    }\n  }, _marked8);\n}\n\nfunction watchUpdateRoom() {\n  return _regeneratorRuntime.wrap(function watchUpdateRoom$(_context9) {\n    while (1) {\n      switch (_context9.prev = _context9.next) {\n        case 0:\n          _context9.next = 2;\n          return takeEvery(UPDATE_ROOM, updateRoom);\n\n        case 2:\n        case \"end\":\n          return _context9.stop();\n      }\n    }\n  }, _marked9);\n}\n\nfunction watchDeleteRooms() {\n  return _regeneratorRuntime.wrap(function watchDeleteRooms$(_context10) {\n    while (1) {\n      switch (_context10.prev = _context10.next) {\n        case 0:\n          _context10.next = 2;\n          return takeEvery(DELETE_ROOM, deleteRoom);\n\n        case 2:\n        case \"end\":\n          return _context10.stop();\n      }\n    }\n  }, _marked10);\n}\n\nfunction RoomListSaga() {\n  return _regeneratorRuntime.wrap(function RoomListSaga$(_context11) {\n    while (1) {\n      switch (_context11.prev = _context11.next) {\n        case 0:\n          _context11.next = 2;\n          return all([fork(watchGetRoomList), fork(watchCreateRoom), fork(watchUpdateRoom), fork(watchDeleteRooms), fork(watchGetCurrentRoomInfo)]);\n\n        case 2:\n        case \"end\":\n          return _context11.stop();\n      }\n    }\n  }, _marked11);\n}\n\nexport default RoomListSaga;","map":{"version":3,"sources":["D:/GIT HUB/NCKH2020/KHAN/AndroidApp/src/redux/roomList/saga.js"],"names":["getRoomList","getRoomInfo","newRoom","updateRoom","deleteRoom","watchGetRoomList","watchGetCurrentRoomInfo","watchCreateRoom","watchUpdateRoom","watchDeleteRooms","RoomListSaga","all","call","fork","takeEvery","put","requestApi","CREATE_ROOM","CREATE_ROOM_SUCCESS","DELETE_ROOM","GET_CURR_ROOM_INFO","GET_ROOM_LIST","SET_CURR_ROOM","UPDATE_ROOM","getRoomListSuccess","getRoomListFailed","createRoomSuccess","createRoomFailed","updateRoomFailed","updateRoomSuccess","deleteRoomSuccess","deleteRoomFailed","getCurrentRoomInfoSuccess","getCurrentRoomInfoFailed","user","payload","method","headers","accessToken","url","response","status","result","accesses","room_id","params","room","options","data","room_info"],"mappings":"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","sourcesContent":["import { all, call, fork, takeEvery, put } from 'redux-saga/effects';\r\nimport { requestApi } from 'helpers/api';\r\nimport { CREATE_ROOM, CREATE_ROOM_SUCCESS, DELETE_ROOM, GET_CURR_ROOM_INFO, GET_ROOM_LIST, SET_CURR_ROOM, UPDATE_ROOM } from './constants';\r\n\r\nimport {\r\n    getRoomListSuccess,\r\n    getRoomListFailed,\r\n    createRoomSuccess,\r\n    createRoomFailed,\r\n    updateRoomFailed,\r\n    updateRoomSuccess,\r\n    deleteRoomSuccess,\r\n    deleteRoomFailed,\r\n    getCurrentRoomInfoSuccess,\r\n    getCurrentRoomInfoFailed\r\n\r\n} from './actions';\r\n\r\n\r\nfunction* getRoomList({payload:{user}}){\r\n    try{\r\n        const response = yield call(requestApi, {\r\n            method: 'get',\r\n            headers: {\r\n                'x-access-token': user.accessToken,\r\n            },\r\n            url: 'api/room/access/all'\r\n        });\r\n        if (response.status==\"success\"){\r\n            yield put(getRoomListSuccess(response.result.accesses));\r\n        } else {\r\n            yield put(getRoomListFailed(response.result));\r\n        }\r\n    } catch (error){\r\n        yield put(getRoomListFailed(error));\r\n    }\r\n}\r\n\r\nfunction* getRoomInfo({payload:{user,room_id}}){\r\n    try{\r\n        const response = yield call(requestApi, {\r\n            method: 'get',\r\n            headers: {\r\n                'x-access-token': user.accessToken,\r\n            },\r\n            url: 'api/room/',\r\n            params: {\r\n                room_id\r\n            }\r\n        });\r\n        if (response.status==\"success\"){\r\n            yield put(getCurrentRoomInfoSuccess(response.result.room));\r\n        } else {\r\n            yield put(getCurrentRoomInfoFailed(response.result));\r\n        }\r\n    } catch (error){\r\n        yield put(getCurrentRoomInfoFailed(error));\r\n    }\r\n}\r\n\r\n\r\nfunction* newRoom({ payload: {user,room} }) {\r\n    const options = {\r\n        method: 'post',\r\n        headers: { \r\n            'Content-Type': 'application/json',\r\n            'x-access-token': user.accessToken\r\n         },\r\n        data:room,\r\n        url : 'api/room/create'\r\n    };\r\n\r\n    try {\r\n        const response = yield call(requestApi,options);\r\n        if (response.status==='success') {\r\n            yield put(createRoomSuccess(response.result.room));\r\n        } else {\r\n            yield put(createRoomFailed(response.result));\r\n        }\r\n    } catch (error) {\r\n        yield put(createRoomFailed(error));\r\n    }\r\n}\r\n\r\nfunction* updateRoom({ payload: {user,room_id,room_info} }) {\r\n    const options = {\r\n        method: 'post',\r\n        headers: { \r\n            'Content-Type': 'application/json',\r\n            'x-access-token': user.accessToken\r\n         },\r\n        data:{room_id: room_id,...room_info},\r\n        url : 'api/room/edit'\r\n    };\r\n\r\n    try {\r\n        const response = yield call(requestApi,options);\r\n        if (response.status==='success') {\r\n            yield put(updateRoomSuccess(response.result.room));\r\n        } else {\r\n            yield put(updateRoomFailed(response.result));\r\n        }\r\n    } catch (error) {\r\n        yield put(updateRoomFailed(error));\r\n    }\r\n}\r\nfunction* deleteRoom({ payload: {user,room_id} }) {\r\n    const options = {\r\n        method: 'delete',\r\n        headers: { \r\n            'Content-Type': 'application/json',\r\n            'x-access-token': user.accessToken\r\n         },\r\n        data:{room_id},\r\n        url : 'api/room/'\r\n    };\r\n\r\n    try {\r\n        const response = yield call(requestApi,options);\r\n        if (response.status==='success') {\r\n            yield put(deleteRoomSuccess(room_id));\r\n        } else {\r\n            yield put(deleteRoomFailed(response.result));\r\n        }\r\n    } catch (error) {\r\n        yield put(deleteRoomFailed(error));\r\n    }\r\n}\r\n\r\n\r\nfunction * watchGetRoomList(){\r\n    yield takeEvery(GET_ROOM_LIST, getRoomList);\r\n}\r\n\r\nfunction * watchGetCurrentRoomInfo(){\r\n    yield takeEvery(GET_CURR_ROOM_INFO, getRoomInfo);\r\n}\r\n\r\nfunction * watchCreateRoom(){\r\n    yield takeEvery(CREATE_ROOM, newRoom);\r\n}\r\nfunction * watchUpdateRoom(){\r\n    yield takeEvery(UPDATE_ROOM, updateRoom);\r\n}\r\nfunction * watchDeleteRooms(){\r\n    yield takeEvery(DELETE_ROOM, deleteRoom);\r\n}\r\n\r\nfunction* RoomListSaga(){\r\n    yield all([\r\n        fork(watchGetRoomList),\r\n        fork(watchCreateRoom),\r\n        fork(watchUpdateRoom),\r\n        fork(watchDeleteRooms),\r\n        fork(watchGetCurrentRoomInfo),\r\n    ])\r\n}\r\n\r\nexport default RoomListSaga;"]},"metadata":{},"sourceType":"module"}